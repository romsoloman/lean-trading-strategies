[{"text": "\"\"\"\nIndicator management for Rom150Bot.\n\nHandles creation, tracking, and querying of technical indicators.\n\"\"\"\nfrom AlgorithmImports import *\n\n\nclass IndicatorManager:\n    \"\"\"\n    Manages technical indicators for all securities.\n    \n    Responsibilities:\n    - Create and register indicators for each symbol\n    - Check indicator readiness\n    - Retrieve indicator values\n    - Calculate indicator-based metrics (slope, etc.)\n    \"\"\"\n    \n    def __init__(self, algorithm, sma_period, atr_period, slope_lookback):\n        \"\"\"Initialize the indicator manager.\"\"\"\n        self.algorithm = algorithm\n        self.sma_period = sma_period\n        self.atr_period = atr_period\n        self.slope_lookback = slope_lookback\n        \n        # Indicator storage\n        self.sma_indicators = {}\n        self.atr_indicators = {}\n        \n    def add_indicators(self, symbol):\n        \"\"\"Create and register indicators for a symbol.\"\"\"\n        self.sma_indicators[symbol] = self.algorithm.sma(\n            symbol, \n            self.sma_period, \n            Resolution.DAILY\n        )\n        self.atr_indicators[symbol] = self.algorithm.atr(\n            symbol, \n            self.atr_period, \n            MovingAverageType.SIMPLE, \n            Resolution.DAILY\n        )\n        \n    def remove_indicators(self, symbol):\n        \"\"\"Remove indicators for a symbol.\"\"\"\n        if symbol in self.sma_indicators:\n            del self.sma_indicators[symbol]\n        if symbol in self.atr_indicators:\n            del self.atr_indicators[symbol]\n            \n    def are_indicators_ready(self, symbol):\n        \"\"\"Check if all indicators are ready for a symbol.\"\"\"\n        if symbol not in self.sma_indicators or symbol not in self.atr_indicators:\n            return False\n        \n        sma_ready = self.sma_indicators[symbol].is_ready\n        atr_ready = self.atr_indicators[symbol].is_ready\n        enough_samples = (\n            self.sma_indicators[symbol].samples >= \n            (self.sma_period + self.slope_lookback)\n        )\n        \n        return sma_ready and atr_ready and enough_samples\n    \n    def get_sma_value(self, symbol):\n        \"\"\"Get current SMA value for a symbol.\"\"\"\n        if symbol not in self.sma_indicators or not self.sma_indicators[symbol].is_ready:\n            return None\n        return self.sma_indicators[symbol].current.value\n    \n    def get_atr_value(self, symbol):\n        \"\"\"Get current ATR value for a symbol.\"\"\"\n        if symbol not in self.atr_indicators or not self.atr_indicators[symbol].is_ready:\n            return None\n        return self.atr_indicators[symbol].current.value\n    \n    def is_sma_slope_positive(self, symbol):\n        \"\"\"Check if SMA has a positive slope.\"\"\"\n        if symbol not in self.sma_indicators:\n            return False\n        \n        sma_indicator = self.sma_indicators[symbol]\n        if not sma_indicator.is_ready:\n            return False\n        if sma_indicator.samples < (self.sma_period + self.slope_lookback):\n            return False\n        \n        current_sma = sma_indicator.current.value\n        if sma_indicator.window.count < self.slope_lookback + 1:\n            return False\n        past_sma = sma_indicator.window[self.slope_lookback]\n        if past_sma is None:\n            return False\n        \n        return current_sma > past_sma\n    \n    def get_all_symbols(self):\n        \"\"\"Get all symbols that have indicators.\"\"\"\n        return list(self.sma_indicators.keys())\n", "type": "text"}]