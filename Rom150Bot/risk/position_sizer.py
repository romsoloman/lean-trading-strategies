[{"text": "\"\"\"\nPosition sizing logic for Rom150Bot.\n\nCalculates share quantities based on risk management rules.\n\"\"\"\n\n\nclass PositionSizer:\n    \"\"\"\n    Calculates position sizes based on fixed risk percentage.\n    \n    Uses the formula:\n        Shares = (Portfolio Value Ã— Risk %) / (Entry Price - Stop Price)\n    \"\"\"\n    \n    def __init__(self, risk_per_trade):\n        \"\"\"Initialize the position sizer.\"\"\"\n        self.risk_per_trade = risk_per_trade\n    \n    def calculate_shares(self, current_price, stop_price, portfolio_value):\n        \"\"\"Calculate number of shares to purchase.\"\"\"\n        if stop_price <= 0 or current_price <= stop_price:\n            return 0\n        \n        risk_amount = portfolio_value * self.risk_per_trade\n        stop_distance = current_price - stop_price\n        \n        if stop_distance <= 0:\n            return 0\n        \n        shares = int(risk_amount / stop_distance)\n        return max(0, shares)\n", "type": "text"}]