[{"text": "\"\"\"\nUniverse selection for Rom150Bot.\n\nFilters and selects tradeable securities.\n\"\"\"\n\n\nclass UniverseSelector:\n    \"\"\"\n    Handles universe selection and filtering.\n    \n    Criteria:\n    - NASDAQ and NYSE exchanges\n    - Market cap > $1 billion (with real data)\n    - Top N stocks by dollar volume\n    \"\"\"\n    \n    def __init__(self, algorithm, target_size, minimum_market_cap):\n        \"\"\"Initialize the universe selector.\"\"\"\n        self.algorithm = algorithm\n        self.target_size = target_size\n        self.minimum_market_cap = minimum_market_cap\n    \n    def coarse_selection_function(self, coarse):\n        \"\"\"Coarse universe selection function called by LEAN engine.\"\"\"\n        coarse_list = list(coarse)\n        \n        # Filter stocks with sufficient dollar volume\n        filtered = [x for x in coarse_list if x.dollar_volume > 0]\n        \n        # If we have fundamental data available, use stricter filter\n        if any(x.has_fundamental_data for x in filtered):\n            filtered = [\n                x for x in filtered\n                if x.has_fundamental_data and x.dollar_volume > self.minimum_market_cap\n            ]\n        \n        # Sort by dollar volume (liquidity) and take top N\n        sorted_by_volume = sorted(filtered, key=lambda x: x.dollar_volume, reverse=True)\n        symbols = [x.symbol for x in sorted_by_volume[:self.target_size]]\n        \n        self.algorithm.debug(\n            f\"Universe selected {len(symbols)} stocks from {len(coarse_list)} candidates\"\n        )\n        \n        return symbols\n", "type": "text"}]